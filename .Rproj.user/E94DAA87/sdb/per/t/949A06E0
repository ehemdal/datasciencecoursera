{
    "contents" : "rankall <- function(outcome, num = \"best\") {\n  ## Read outcome data\n  setwd(\"C:/git/ProgrammingAssignment3\")\n  d <-read.csv(\"outcome-of-care-measures.csv\",colClasses=\"character\") \n  #d <-read.csv(\"test.csv\",colClasses=\"character\") #start w/out colClasses=\"character\"\n  \n  ## Check that outcome is valid and get a list of states from the data\n  ocname <- c(\"heart attack\" = 11, \"heart failure\" = 17 ,\"pneumonia\" = 23)\n  if (sum(outcome == names(ocname)) == 0) {stop(\"invalid outcome\")}\n  # else {print(\"OK outcome\")}\n  \n  # check num for \"best\" and numeric, do \"worst\" later\n  if (num == \"best\") { count <- 1}\n  if (num <= 0) {stop(\"invalid rank\")}\n  \n  sl <- d[,7]\n  # Get the column number from the input name\n  colnbr <- as.numeric(ocname[outcome])\n  ## For each state, find the hospital of the given rank\n  ## Return a data frame with the hospital names and the\n  ## (abbreviated) state name\n  ## Get into vector form\n  sd <- split(d,sl)  # list of lists of length 1 containing data.frames\n  states <- unique(sl) # use to get unique state codes to loop over\n  #loop over the list of data frames\n  hospital <- NULL\n  state <- NULL\n  for (i in seq(along=states)) {\n    #print(i)\n    ss <- (sd[[states[i]]]) ## get at the data frame at the bottom\n    \n    # Get the death rates for this state\n    ss[,colnbr] <- as.numeric(ss[,colnbr])\n    rates <- (sort(as.numeric(ss[,colnbr])))\n    # set the count right\n    if (num == \"best\") { count <- 1}\n    if (num == \"worst\") {count <- length(rates)}\n      else { count <- num }\n    if (count > length(rates)) {\n      # This is the NA case\n      hospital <- c(hospital, \"<NA>\")\n      state <- c(state, states[i])\n      next\n      } # bail out if we are out of range\n    rank <- rates[count]\n    result <- subset(ss[,2], ss[,colnbr] == rank)\n    result = sort(result)\n    hospital <- c(hospital, result[1])\n    state <- c(state,states[i])\n  }\n  \n  # Now put together the answer data frame\n  answer <- data.frame(hospital, state, row.names = state)\n  answer\n\n}",
    "created" : 1408897148173.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "325521414",
    "id" : "949A06E0",
    "lastKnownWriteTime" : 1408913147,
    "path" : "C:/git/ProgrammingAssignment3/rankall.R",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : true,
    "type" : "r_source"
}